<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>International Identity Input</title>
    <link rel="stylesheet" href="src/css/intlIdInput.css" />
    <link rel="stylesheet" href="src/css/test.css" />
  </head>

  <body>
    <h1>International Identity Input</h1>
    <form id="formId">
      <input id="iso2" type="text" value="" hidden/>
      <input id="identity" name="identity" type="text" value="" />
      <button type="submit" onclick="console.log(iii.isValid() ? 'valid' : 'invalid')">Validate</button>
    </form>

    <script src="src/js/intlIdInput.js"></script>
    <script>
      var input = document.querySelector("#identity");
      let iii = window.intlIdInput(input, {
        // allowDropdown: false,
        // countrySearch: false,
        //onlyCountries: ["ZA","BW","LS","NA","SZ","US","ZW"],
        ignoreRulesetNotFound: true,
        initialCountry: "ZA",
        bypassValidationForCountries: ["BW"],
        hiddenInput: function (){
          return {
            country: "iso2"
          };
        }
      });

      var form = document.querySelector("#formId");
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        console.log(iii.getNumber());
        console.log(iii.getSelectedCountryData());
        console.log(iii.isValid() ? "valid" : "invalid");
        if(iii.isValid()) {
          alert("valid");
        } else {
          alert("invalid");
        }
      });
    </script>
  </body>
</html>
